![ddia 0407](assets/ddia_0407.png)

###### شکل 4-7. وقتی نسخه قدیمی‌تر برنامه داده‌هایی را که قبلاً توسط نسخه جدیدتر برنامه نوشته شده است به‌روز می‌کند، اگر مراقب نباشید، ممکن است داده‌ها از بین بروند.

### مقادیر مختلف در زمان‌های مختلف نوشته شده‌اند

یک پایگاه داده به طور کلی اجازه می‌دهد هر مقداری در هر زمانی به‌روز شود. این بدان معناست که در یک پایگاه داده واحد ممکن است برخی مقادیر داشته باشید که پنج میلی‌ثانیه پیش نوشته شده‌اند، و برخی مقادیر که پنج سال پیش نوشته شده‌اند.

وقتی نسخه جدیدی از برنامه خود را مستقر می‌کنید (حداقل یک برنامه سمت سرور)، ممکن است نسخه قدیمی را کاملاً با نسخه جدید در عرض چند دقیقه جایگزین کنید. همین امر در مورد محتویات پایگاه داده صدق نمی‌کند: داده‌های پنج ساله هنوز آنجا خواهند بود، در کدگذاری اصلی، مگر اینکه از آن زمان به طور صریح آن‌ها را بازنویسی کرده باشید. این مشاهده گاهی به عنوان "داده از کد بیشتر عمر می‌کند" خلاصه می‌شود.

بازنویسی (مهاجرت) داده‌ها به یک طرح‌واره جدید قطعاً امکان‌پذیر است، اما کار پرهزینه‌ای برای انجام روی یک مجموعه داده بزرگ است، بنابراین بیشتر پایگاه‌های داده در صورت امکان از آن اجتناب می‌کنند. بیشتر پایگاه‌های داده رابطه‌ای تغییرات ساده طرح‌واره را اجازه می‌دهند، مانند اضافه کردن یک ستون جدید با مقدار پیش‌فرض null، بدون بازنویسی داده‌های موجود.[v](ch04.html#idm140605776834848) وقتی یک سطر قدیمی خوانده می‌شود، پایگاه داده برای هر ستونی که در داده‌های کدگذاری شده روی دیسک وجود ندارد، null‌ها را پر می‌کند.

پایگاه داده سندی LinkedIn به نام Espresso از Avro برای ذخیره‌سازی استفاده می‌کند، که به آن اجازه می‌دهد از قوانین تکامل طرح‌واره Avro استفاده کند [[23](ch04.html#Auradkar2015wz)].