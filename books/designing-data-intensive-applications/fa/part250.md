![ddia 0406](assets/ddia_0406.png)

###### شکل 4-6. یک خواننده آورو تفاوت‌های بین طرح‌واره نویسنده و طرح‌واره خواننده را حل می‌کند.

### قوانین تکامل طرح‌واره

با آورو، سازگاری پیشرو به این معناست که می‌توانید یک نسخه جدید از طرح‌واره را به عنوان نویسنده و یک نسخه قدیمی از طرح‌واره را به عنوان خواننده داشته باشید. برعکس، سازگاری پسرو به این معناست که می‌توانید یک نسخه جدید از طرح‌واره را به عنوان خواننده و یک نسخه قدیمی را به عنوان نویسنده داشته باشید.

برای حفظ سازگاری، شما فقط می‌توانید فیلدی را که مقدار پیش‌فرض دارد اضافه یا حذف کنید. (فیلد favoriteNumber در طرح‌واره آوروی ما یک مقدار پیش‌فرض null دارد.) به عنوان مثال، فرض کنید یک فیلد با مقدار پیش‌فرض اضافه می‌کنید، بنابراین این فیلد جدید در طرح‌واره جدید وجود دارد اما در طرح‌واره قدیمی وجود ندارد. وقتی یک خواننده با استفاده از طرح‌واره جدید، رکوردی را که با طرح‌واره قدیمی نوشته شده است می‌خواند، مقدار پیش‌فرض برای فیلد گمشده پر می‌شود.

اگر فیلدی را اضافه کنید که مقدار پیش‌فرض ندارد، خوانندگان جدید نمی‌توانند داده‌هایی را که توسط نویسندگان قدیمی نوشته شده‌اند بخوانند، بنابراین سازگاری پسرو را می‌شکنید. اگر فیلدی را حذف کنید که مقدار پیش‌فرض ندارد، خوانندگان قدیمی نمی‌توانند داده‌هایی را که توسط نویسندگان جدید نوشته شده‌اند بخوانند، بنابراین سازگاری پیشرو را می‌شکنید.