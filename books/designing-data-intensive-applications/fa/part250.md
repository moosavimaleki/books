![ddia 0406](assets/ddia_0406.png) ###### شکل 4-6. یک خواننده Avro تفاوت‌های بین طرح‌واره نویسنده و طرح‌واره خواننده را حل می‌کند. ### قوانین تکامل طرح‌واره (Schema evolution rules)

با Avro، سازگاری رو به جلو (forward compatibility) به این معنی است که می‌توانید نسخه جدیدی از طرح‌واره را به عنوان نویسنده و
نسخه قدیمی طرح‌واره را به عنوان خواننده داشته باشید. برعکس، سازگاری رو به عقب (backward compatibility) به این معنی است که می‌توانید
نسخه جدیدی از طرح‌واره را به عنوان خواننده و نسخه قدیمی را به عنوان نویسنده داشته باشید.

برای حفظ سازگاری، شما فقط می‌توانید فیلدی را که مقدار پیش‌فرض دارد اضافه یا حذف کنید. (فیلد
favoriteNumber در طرح‌واره Avro ما دارای مقدار پیش‌فرض null است.) به عنوان مثال، فرض کنید یک
فیلد با مقدار پیش‌فرض اضافه می‌کنید، بنابراین این فیلد جدید در طرح‌واره جدید وجود دارد اما در طرح‌واره قدیمی وجود ندارد. هنگامی که
خواننده‌ای که از طرح‌واره جدید استفاده می‌کند، رکوردی را که با طرح‌واره قدیمی نوشته شده است می‌خواند، مقدار پیش‌فرض برای فیلد گمشده پر می‌شود.

اگر فیلدی را اضافه کنید که مقدار پیش‌فرض ندارد، خواننده‌های جدید نمی‌توانند داده‌هایی را که
توسط نویسندگان قدیمی نوشته شده‌اند بخوانند، بنابراین سازگاری رو به عقب را می‌شکنید. اگر فیلدی را
که مقدار پیش‌فرض ندارد حذف کنید، خواننده‌های قدیمی نمی‌توانند داده‌هایی را که توسط نویسندگان جدید نوشته شده‌اند بخوانند، بنابراین
سازگاری رو به جلو را می‌شکنید.