![ddia 0402](assets/ddia_0402.png)

###### شکل 4-2. رکورد نمونه کدگذاری شده با استفاده از BinaryProtocol تریفت.

مشابه [شکل 4-1](#fig_encoding_messagepack)، هر فیلد یک حاشیه‌نویسی نوع دارد (برای نشان دادن اینکه آیا
یک رشته، عدد صحیح، لیست و غیره است) و، در صورت نیاز، یک نشانگر طول (طول یک رشته،
تعداد موارد در یک لیست). رشته‌هایی که در داده ظاهر می‌شوند ("Martin"، "daydreaming"، "hacking")
نیز به عنوان ASCII (یا بهتر بگوییم، UTF-8) کدگذاری شده‌اند، مشابه قبل.

تفاوت بزرگ در مقایسه با [شکل 4-1](#fig_encoding_messagepack) این است که هیچ نام فیلدی وجود ندارد
(userName، favoriteNumber، interests). در عوض، داده‌های کدگذاری شده شامل برچسب‌های فیلد هستند، که
اعدادی هستند (1، 2 و 3). اینها اعدادی هستند که در تعریف طرح‌واره ظاهر می‌شوند. برچسب‌های فیلد
مانند نام مستعار برای فیلدها هستند—آنها یک روش فشرده برای گفتن اینکه درباره چه فیلدی صحبت می‌کنیم هستند،
بدون اینکه مجبور باشیم نام فیلد را هجی کنیم.

کدگذاری Thrift CompactProtocol از نظر معنایی معادل BinaryProtocol است، اما همانطور که می‌توانید
در [شکل 4-3](#fig_encoding_thrift_compact) ببینید، همان اطلاعات را در تنها 34 بایت فشرده می‌کند. این کار را
با فشرده‌سازی نوع فیلد و شماره برچسب در یک بایت واحد، و با استفاده از اعداد صحیح با طول متغیر انجام می‌دهد.
به جای استفاده از هشت بایت کامل برای عدد 1337، در دو بایت کدگذاری می‌شود، با بیت بالای
هر بایت که برای نشان دادن اینکه آیا هنوز بایت‌های بیشتری در راه هستند استفاده می‌شود. این بدان معناست که اعداد بین -64
و 63 در یک بایت کدگذاری می‌شوند، اعداد بین -8192 و 8191 در دو بایت کدگذاری می‌شوند و غیره. اعداد بزرگتر
از بایت‌های بیشتری استفاده می‌کنند.