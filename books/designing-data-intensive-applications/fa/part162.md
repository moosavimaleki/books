![ddia 0305](assets/ddia_0305.png)
###### شکل 3-5. یک SSTable با یک شاخص در حافظه.

شما همچنان به یک شاخص در حافظه نیاز دارید تا آفست‌ها را برای برخی از کلیدها به شما بگوید، اما می‌تواند پراکنده باشد: یک کلید برای هر چند کیلوبایت فایل قطعه کافی است، زیرا چند کیلوبایت می‌تواند بسیار سریع اسکن شود.[i](ch03.html#idm140605778351696)

3. از آنجا که درخواست‌های خواندن در هر صورت نیاز به اسکن چندین جفت کلید-مقدار در محدوده درخواست شده دارند، امکان گروه‌بندی این رکوردها در یک بلوک و فشرده‌سازی آن قبل از نوشتن به دیسک وجود دارد (با ناحیه سایه‌دار در [شکل 3-5](#fig_storage_sstable_index) نشان داده شده است). هر ورودی از شاخص پراکنده در حافظه سپس به شروع یک بلوک فشرده اشاره می‌کند. علاوه بر صرفه‌جویی در فضای دیسک، فشرده‌سازی همچنین استفاده از پهنای باند I/O را کاهش می‌دهد.

### ساخت و نگهداری SSTable‌ها

تا اینجا خوب است—اما چگونه داده‌های خود را از ابتدا بر اساس کلید مرتب می‌کنید؟ نوشتن‌های ورودی ما می‌توانند در هر ترتیبی رخ دهند. 