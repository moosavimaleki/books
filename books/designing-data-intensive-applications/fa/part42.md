SELECT tweets.*, users.* FROM tweets
  JOIN users   ON tweets.sender_id    = users.id
  JOIN follows ON follows.followee_id = users.id
  WHERE follows.follower_id = current_user

2. نگهداری یک کش برای تایم‌لاین خانه هر کاربر—مانند یک صندوق پستی از توییت‌ها برای هر کاربر دریافت‌کننده (به [شکل 1-3](#fig_twitter_timelines) مراجعه کنید). هنگامی که یک کاربر توییتی ارسال می‌کند، تمام افرادی را که آن کاربر را دنبال می‌کنند جستجو کنید، و توییت جدید را در کش تایم‌لاین خانه هر یک از آنها وارد کنید. درخواست برای خواندن تایم‌لاین خانه سپس ارزان است، زیرا نتیجه آن از قبل محاسبه شده است.

![ddia 0102](assets/ddia_0102.png) ###### شکل 1-2. طرح رابطه‌ای ساده برای پیاده‌سازی تایم‌لاین خانه توییتر.

![ddia 0103](assets/ddia_0103.png) ###### شکل 1-3. خط لوله داده توییتر برای تحویل توییت‌ها به دنبال‌کنندگان، با پارامترهای بار از نوامبر 2012 [[16](ch01.html#Krikorian2012)].

نسخه اول توییتر از رویکرد 1 استفاده می‌کرد، اما سیستم‌ها برای همگام ماندن با بار پرس‌وجوهای تایم‌لاین خانه مشکل داشتند، بنابراین شرکت به رویکرد 2 تغییر کرد. این روش بهتر کار می‌کند زیرا نرخ متوسط توییت‌های منتشر شده تقریباً دو مرتبه بزرگی کمتر از نرخ خواندن تایم‌لاین خانه است، و بنابراین در این مورد ترجیح داده می‌شود که در زمان نوشتن کار بیشتری انجام شود و در زمان خواندن کار کمتری. 