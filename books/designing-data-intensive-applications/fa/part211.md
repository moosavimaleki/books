خوشبختانه، ما قبلاً در این فصل یک راه‌حل خوب دیده‌ایم: درخت‌های LSM. تمام نوشتن‌ها ابتدا به یک ذخیره‌سازی در حافظه می‌روند، جایی که به یک ساختار مرتب‌شده اضافه می‌شوند و برای نوشتن در دیسک آماده می‌شوند. مهم نیست که ذخیره‌سازی در حافظه سطر-محور است یا ستون-محور. وقتی نوشتن‌های کافی جمع شدند، آن‌ها با فایل‌های ستون در دیسک ادغام می‌شوند و به صورت انبوه در فایل‌های جدید نوشته می‌شوند. این اساساً همان کاری است که Vertica انجام می‌دهد [[62](ch03.html#Lamb2012ub)].

پرس‌وجوها نیاز دارند هم داده‌های ستون در دیسک و هم نوشتن‌های اخیر در حافظه را بررسی کنند و این دو را ترکیب کنند. با این حال، بهینه‌ساز پرس‌وجو این تمایز را از کاربر پنهان می‌کند. از دیدگاه یک تحلیلگر، داده‌ای که با درج‌ها، به‌روزرسانی‌ها یا حذف‌ها تغییر کرده است، بلافاصله در پرس‌وجوهای بعدی منعکس می‌شود.

## تجمیع: مکعب‌های داده و نماهای مادی‌سازی شده

هر انبار داده لزوماً یک ذخیره‌سازی ستونی نیست: پایگاه‌های داده سطر-محور سنتی و چند معماری دیگر نیز استفاده می‌شوند. با این حال، ذخیره‌سازی ستونی می‌تواند برای پرس‌وجوهای تحلیلی موردی به طور قابل توجهی سریع‌تر باشد، بنابراین به سرعت در حال کسب محبوبیت است [[51](ch03.html#OneSizeFitsNone2013vw), [63](ch03.html#LeDem2014tl)].