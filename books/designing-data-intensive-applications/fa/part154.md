![ddia 0301](assets/ddia_0301.png)
###### شکل 3-1. ذخیره‌سازی یک لاگ از جفت‌های کلید-مقدار در یک فرمت شبیه به CSV، شاخص‌گذاری شده با یک نقشه هش در حافظه.

این ممکن است ساده‌انگارانه به نظر برسد، اما یک رویکرد عملی است. در واقع، این اساساً همان کاری است که Bitcask (موتور ذخیره‌سازی پیش‌فرض در Riak) انجام می‌دهد [[3](ch03.html#Sheehy2010uy)]. Bitcask خواندن و نوشتن با کارایی بالا را ارائه می‌دهد، مشروط بر اینکه تمام کلیدها در RAM موجود جا شوند، زیرا نقشه هش کاملاً در حافظه نگهداری می‌شود. مقادیر می‌توانند فضای بیشتری از حافظه موجود استفاده کنند، زیرا می‌توانند با فقط یک جستجوی دیسک از دیسک بارگیری شوند. اگر آن بخش از فایل داده قبلاً در کش سیستم فایل باشد، یک خواندن اصلاً نیازی به I/O دیسک ندارد.

یک موتور ذخیره‌سازی مانند Bitcask برای موقعیت‌هایی مناسب است که در آن مقدار برای هر کلید به طور مکرر به‌روزرسانی می‌شود. به عنوان مثال، کلید ممکن است URL یک ویدیوی گربه باشد، و مقدار ممکن است تعداد دفعاتی باشد که پخش شده است (هر بار که کسی دکمه پخش را می‌زند، افزایش می‌یابد). در این نوع بار کاری، نوشتن‌های زیادی وجود دارد، اما کلیدهای متمایز زیادی وجود ندارد—شما تعداد زیادی نوشتن به ازای هر کلید دارید، اما نگه داشتن همه کلیدها در حافظه امکان‌پذیر است. 