با این حال، شاخص جدول هش نیز محدودیت‌هایی دارد:

* جدول هش باید در حافظه جا شود، بنابراین اگر تعداد بسیار زیادی کلید داشته باشید، شانس ندارید. در اصل، می‌توانید یک نقشه هش را روی دیسک نگهداری کنید، اما متأسفانه ایجاد یک نقشه هش روی دیسک با عملکرد خوب دشوار است. این نیاز به بسیاری از I/O دسترسی تصادفی دارد، رشد آن هنگامی که پر می‌شود گران است، و برخوردهای هش نیاز به منطق پیچیده دارند [[5](ch03.html#Graefe2011kk)].

* پرس‌وجوهای محدوده کارآمد نیستند. به عنوان مثال، شما نمی‌توانید به راحتی همه کلیدهای بین kitty00000 و kitty99999 را اسکن کنید—شما باید هر کلید را به صورت جداگانه در نقشه‌های هش جستجو کنید.

در بخش بعدی، ما به یک ساختار شاخص‌گذاری نگاه خواهیم کرد که این محدودیت‌ها را ندارد.

## SSTables و درخت‌های LSM

در [شکل 3-3](#fig_storage_merging)، هر قطعه ذخیره‌سازی با ساختار لاگ یک دنباله از جفت‌های کلید-مقدار است. این جفت‌ها به ترتیبی که نوشته شده‌اند ظاهر می‌شوند، و مقادیر بعدتر در لاگ بر مقادیر برای همان کلید قبل‌تر در لاگ اولویت دارند. جدا از آن، ترتیب جفت‌های کلید-مقدار در فایل مهم نیست. 